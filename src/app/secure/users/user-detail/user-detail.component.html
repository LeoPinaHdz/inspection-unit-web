<div>
    <mat-card>
        <mat-card-header>
            <mat-card-title>
                <a [routerLink]="['/secure/users']" class="button-back" color="accent" mat-mini-fab>
                    <mat-icon>arrow_circle_left</mat-icon>
                </a>
                Nuevo usuario
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="userForm">
                <div class="form-container">
                    <div class="form-cell-3"><mat-form-field appearance="outline">
                      <mat-label>Id</mat-label>
                      <input matInput formControlName="idUsuario" appCurrencyMask type="text" />
                    </mat-form-field></div>
                    <div class="form-cell-3">
                        <mat-form-field appearance="outline">
                            <mat-label>Usuario</mat-label>
                            <input matInput formControlName="usuario" type="text" required/>
                            <mat-error>
                                <error-message nomCampo="Usuario"></error-message>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="form-cell-3">
                        <mat-form-field appearance="outline">
                            <mat-label>Contraseña</mat-label>
                            <input matInput formControlName="contrasena" type="password" required/>
                            <mat-error>
                                <error-message nomCampo="Contraseña"></error-message>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="form-cell-3">
                        <mat-form-field appearance="outline">
                            <mat-label>Nombre</mat-label>
                            <input matInput formControlName="nombre" type="text" required/>
                            <mat-error>
                                <error-message nomCampo="Nombre"></error-message>
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </form>
            <div class="form-container">
                <div class="form-cell-3">
                    <span class="example-list-section">
                        <mat-checkbox class="example-margin" [checked]="allClientsSelected" color="primary"
                                    [indeterminate]="someClientsSelected()" (change)="selectAllClients($event.checked)">
                        Clientes
                        </mat-checkbox>
                    </span>
                    <span class="example-list-section">
                        <ul>
                            <li *ngFor="let client of clients">
                            <mat-checkbox [(ngModel)]="client.selected" color="primary" (ngModelChange)="selectClient()">
                                {{client.nombre}}
                            </mat-checkbox>
                            </li>
                        </ul>
                    </span>
                </div>
                <div class="form-cell-3">
                    <span class="example-list-section">
                        <mat-checkbox class="example-margin" [checked]="allWarehousesSelected" color="primary"
                                    [indeterminate]="someWarehousesSelected()" (change)="selectAllWarehouses($event.checked)">
                        Bodegas
                        </mat-checkbox>
                    </span>
                    <span class="example-list-section">
                        <ul>
                            <li *ngFor="let warehouse of warehouses">
                                <mat-checkbox [(ngModel)]="warehouse.selected" color="primary" (ngModelChange)="selectWarehouse()">
                                    {{warehouse.nombre}}
                                </mat-checkbox>
                                
                                <mat-form-field *ngIf="warehouse.selected" class="mat-mdc-form-field-large" appearance="outline">
                                    <mat-label>Email:</mat-label>
                                    <input matInput [(ngModel)]="warehouse.email" type="text" appCurrencyMask maxlength="255"/>
                                </mat-form-field>
                            </li>
                        </ul>
                    </span>
                </div>
                <div class="form-cell-3">
                    <span class="example-list-section">
                        <mat-checkbox class="example-margin" [checked]="allScreensSelected" color="primary"
                                    [indeterminate]="someScreensSelected()" (change)="selectAllScreens($event.checked)">
                        Pantallas
                        </mat-checkbox>
                    </span>
                    <span class="example-list-section">
                        <ul>
                            <li *ngFor="let screen of screens">
                            <mat-checkbox [(ngModel)]="screen.selected" color="primary" (ngModelChange)="selectScreen()">
                                {{screen.nombre}}
                            </mat-checkbox>
                            </li>
                        </ul>
                    </span>
                </div>
                <div class="form-cell-3">
                    <mat-checkbox [(ngModel)]="active" color="primary">Activo</mat-checkbox>
                </div>
            </div>
        </mat-card-content>
        <mat-card-footer>
          <button (click)="onSubmit()" mat-fab extended>Guardar</button>
        </mat-card-footer>
    </mat-card>
</div>